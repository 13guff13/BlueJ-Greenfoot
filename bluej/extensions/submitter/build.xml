<?xml version="1.0" encoding="UTF-8"?>
<project name="submitter" default="jarred">

    <!-- ************************************************************ -->
    <!-- set global properties for this extensions build -->


    <!-- the build_java_home is used to find the compiler to fork and the
         tools.jar file to use with it. Note that in general all
         compilation should be done on the minimum supported JDK for
         BlueJ (which is currently 1.3) -->
    <property name="build_java_home" value="o:\programming\jdk1.3"/>

    <!-- set to the location of the test bluej installation
         the extension jar will be installed into this installations extension
         directory -->
    <property name="bluej_home" value="${basedir}/../.."/>

    <!-- set to the name of the extensions jar file -->
    <property name="output_jar" value="submitter.jar"/>


    <!-- ********************************************** -->
    <!-- do not edit below here for local customisation -->

    <!-- set up common directories -->
    <property name="src" value="src" />
    <property name="build" value="classes" />
    <property name="lib" value="lib" />
    <property name="doc" value="doc" />

    <target name="prepare">
        <!-- Create the time stamp -->
        <tstamp/>
        <!-- Create the build directory structure used by compile -->
        <mkdir dir="${build}" />
    </target>

    <target name="compile" depends="prepare">
        <!-- depend srcdir="${src}"
                destdir="${build}"
                cache="depcache"
                closure="no" -->
        <!-- Compile the java code from ${src} into ${build} -->
        <javac srcdir="${src}"
            destdir="${build}"
            deprecation = "yes"
            debug = "yes">
            <classpath>
                <pathelement location="${bluej_home}/lib/ext/bluejext.jar"/>
            </classpath>
        </javac>
        <copy file="${src}/org/bluej/extensions/submitter/World.gif" tofile="${build}/org/bluej/extensions/submitter/World.gif"/>
    </target>

    <target name="jarred" depends="compile">
        <!-- jar up all the classes -->
        <jar jarfile="${bluej_home}/lib/extensions/${output_jar}" compress="no" >
            <fileset dir="${build}" />
            <fileset dir="." includes="${lib}/**" />
            <manifest>
                <attribute name="Main-Class" value="org.bluej.extensions.submitter.Submitter"/>
                <attribute name="Built-By" value="${user.name}"/>
             </manifest>
        </jar>
    </target>

    <target name="doc">
        <!-- Doc the java code from ${src} into ${doc} -->
        <mkdir dir="${doc}"/>
        <javadoc destdir="${doc}"
            packagenames="org.bluej.extensions.submitter.*"
            sourcepath="${src}"
            private="yes">
            <classpath refid="bluej.class.path" />
       </javadoc>
    </target>

    <target name="clean">
        <!-- Delete the ${build} directory trees -->
        <delete dir="${build}" />
        <delete file="${bluej_home}/lib/extensions/${output_jar}" />
    </target>

</project>
