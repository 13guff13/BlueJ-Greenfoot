<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
</head>
<body bgcolor="white">

<P>Provides access for extensions to the BlueJ application via a proxy object, 
and to the classes and objects which BlueJ is manipulating via a number of wrapper classes.
</p>
<p>
An extension can add a menu item to the BlueJ Tools menu, and a
preference panel to the Tools/Preferences/Extensions panel. The
<code>BlueJ</code> proxy object generates events when the user performs
significant actions within BlueJ, and provides access to its projects,
packages, classes and objects via a set of wrapper classes which behave in 
a similar way to the <code>java.lang.reflect</code> classes.  
</P> 

<H2>A simple extension</H2>
<P>The following example implements an extension which logs the name of every
BlueJ project opened by the user 
to <code>System.out</code>. Once it is installed you should see an entry in 
the "Installed Extensions" panel of the BlueJ help menu.</P>

<H3>How to build and install it</H3>

<UL>
  <LI>Compile it, including <code>lib/bluejext.jar</code> from your BlueJ 
      installation in the compiler classpath
  <LI>Create a Jar file containing the classes of your extension, 
      and add a <code>Main-Class</code> attribute to the Manifest of the Jar file.
      Note that this does not mean that the extension needs to have a <code>main()</code> method.
  <LI>Install it by copying the Jar file either into the <code>lib/extensions</code> 
      directory of your BlueJ installation, or into an <code>extensions</code> directory in 
      your BlueJ user configuration directory (<code>&lt;USER_HOME&gt;/.bluej/extensions</code> 
      or <code>&lt;USER_HOME&gt;\bluej\extensions</code>), or into an <code>extensions</code> 
      directory in the single BlueJ project you wish the extension to be active for.
  <LI>Run it. The extension should start when you next run BlueJ, or when you open the BlueJ 
      project into which you installed the extension.
</UL>
<!--
<P>If you are using ant to build your extension's Jar file you can use the following.</P>
<P>The important part is the one adding a Manifest to your jar file and specifying the 
name of the Main-Class to be run on the jar file.</P>
<PRE>
    &lt;target name="jarred" depends="compile">
        &lt;jar jarfile="${bluej_home}/lib/extensions/${output_jar}" compress="no" >
           &lt;fileset dir="${build}" />
            &lt;fileset dir="." includes="${lib}/**" />
            &lt;manifest>
                &lt;attribute name="Main-Class" value="SimpleExtension"/>
             &lt;/manifest>
        &lt;/jar>
    &lt;/target>
</PRE>
-->
<P>This is the actual code</P>

<PRE>
import bluej.extensions.*;
import bluej.extensions.event.*;

import javax.swing.*;
import java.awt.event.*;

import java.net.URL;

/**
 * This is the starting point of a BlueJ Extension
 */
public class SimpleExtension extends Extension implements PackageListener
  {
  /**
   * When this method is called, the extension may start its work.
   */
  public void startup (BlueJ bluej) {
    ExtensionMenu myMenu = new ExtensionMenu();
    bluej.setMenuGenerator(myMenu);
    
    Preferences myPreferences = new Preferences(bluej);
    bluej.setPreferenceGenerator(myPreferences);

    bluej.addPackageListener(this);
  }

  /** 
   * A package has been opened. 
   * Print the name of the project it is part of.
   */
  public void packageOpened ( PackageEvent ev ) {
    System.out.println ("Project " + ev.getPackage().getProject().getName() + " opened.");
  }  
  
  /** 
   * A package is closing.
   */
  public void packageClosing ( PackageEvent ev ) {
  }  
    
  /**
   * This method must decide if this Extension is compatible with the 
   * current release of the BlueJ Extensions API
   */
  public boolean isCompatible () { 
    return true; 
  }

  /**
   * Returns the version number of this extension
   */
  public String  getVersion () { 
    return ("2003.03");  
  }
  
  /**
   * Returns the user-visible name of this extension
   */
  public String getName() {
    return("Simple Extension");
  }

  public String getDescription () {
    return ("A simple extension");
  }

  /**
   * Returns a URL where you can find info on this extension.
   * The real problem is making sure that the link will still be alive in three years...
   */
  public URL getURL () {
    try {
      return new URL("http://www.cs.ukc.ac.uk/projects/bluej/");
    }
    catch ( Exception eee ) {
      // There is no reason at all that this should throw exception...
      System.out.println ("SimpleExtension: getURL: Exception="+eee.getMessage());
      return null;
    }
  }
}
</PRE>


</body>
</html>
